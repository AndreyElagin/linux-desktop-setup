- name: (Fedora) Install lpf-spotify-client
  become: true
  dnf:
    name:
      - lpf-spotify-client
    state: present
  when: ansible_distribution == "Fedora"
  tags:
    - gui
    - spotify

- name: (Fedora) Add flatpak Spotify repo
  become: true
  flatpak_remote:
    name: flathub
    flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo
    method: system
    state: present
  tags:
    - gui
    - spotify

- name: (Fedora) Install Spotify
  community.general.flatpak:
    name: com.spotify.Client
    state: present
    method: user
  tags:
    - gui
    - spotify

- name: (Ubuntu) Add apt-key for spotify
  become: true
  apt_key:
    url: https://download.spotify.com/debian/pubkey_0D811D58.gpg
    state: present
  when: ansible_distribution == "Ubuntu"
  tags:
    - gui
    - spotify

- name: (Ubuntu) Add spotify repo list
  become: true
  apt_repository:
    filename: spotify.list
    repo: deb http://repository.spotify.com stable non-free
    state: present
  when: ansible_distribution == "Ubuntu"
  tags:
    - gui
    - spotify

- name: (Ubuntu) Install spotify
  become: true
  apt:
    name: spotify-client
    state: present
  when: ansible_distribution == "Ubuntu"
  tags:
    - gui
    - spotify
